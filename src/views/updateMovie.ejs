<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/createMovie.css">

</head>

<body>
    <!--   estoy incluyendo un header-->
    <%-include('partials/header')%>
    <!--   estoy incluyendo un header-->
    
    <!-- product detail -->
    
   <div class="main"> 
    <h2 class="title">Edita tu película</h2>
    <div class="form_center"> 
      <main class="form">
       
      <form action="/movies/update/<%=toEdit.id%>" method="POST"><br>
        <div>
            <label for="title">Título</label><br>
            <input type="text" name="title" value="<%=toEdit.title%>"><br>
        </div>
       
        <div>
            <label for="rating">Rating</label><br>
            <input type="text" name="rating" value="<%toEdit.rating%>" > <br>
        </div>
        
        <div> 
            <label for="awards">Premios</label><br>
            <input type="number" name="awards" value="<%toEdit.awards%>" ><br>
        </div>
        
        <div>
            <label for="release_date">Estreno</label><br>
            <input type="date" name="release_date" ><br>
        </div>
        
        <div>
            <label for="length">Duración</label><br>
            <input type="text" name="length" value="<%toEdit.length%>" ><br>
        </div>
        
        <div>
            <label for="genre_id">Genero</label><br>
            <select name="genre_id" id=""  >
                 <%generos.forEach(genero => { %>
                   <%if(toEdit.GenreId ===genero.id) { %>
                    <option value="<%=genero.id%>" selected><%=genero.name %> </option>
                     <% } else { %> 
                        <option value="<%=genero.id%>"><%=genero.name%></option> 
                        <%}%>
                     <%})%>
            
            </select><br>
        </div>

        <div>
            <label for="actores">Actores</label><br>
            <select name="actores" multiple>
              <%actores.forEach(actor => { %>
                <% if (toEdit.actores.some(actoresPelicula => actoresPelicula.id == actor.id)){%>
                    <option value="<%=actor.id%>" selected><%=actor.first_name +" "+actor.last_name %></option>
                    <%} else { %>
                        <option value="<%=actor.id%>"><%=actor.first_name %> + ' '+<%=actor.last_name %> </option>  
                      <%}%>
                 <% })%> 
            </select><br>
        </div>
        
    
        <button class="button-detail"type="submit"> Modificar </button>
        </div>
     </form> 
    </main>

    </div>
   <!--   estoy incluyendo un footer-->
   <div class="footer">  
    <%-include('partials/footer')%>
    </div>
<!--   estoy incluyendo un footer-->  
</body>
</html>